(function(e){function t(t){for(var a,s,c=t[0],o=t[1],u=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,c=1;c<n.length;c++){var o=n[c];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},7984:function(e,t,n){},"85ec":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-loading",{attrs:{active:!!e.loadingText}},[n("div",{staticClass:"loading-icon"}),e.loadingText?n("div",{staticClass:"loading-text"},[e._v(e._s(e.loadingText))]):e._e()]),n("section",{staticClass:"hero is-primary"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[n("b-icon",{staticClass:"m-r-xs m-t-xs",attrs:{icon:"ab-testing",size:"is-medium"}}),n("b-icon",{staticClass:"m-r-md m-t-xs",attrs:{icon:"volume-high",size:"is-medium"}}),n("span",[e._v("오디오 블라인드 테스트 (w/ ffmpeg)")])],1)])])]),n("div",{staticClass:"container has-text-centered m-t-lg"},[n("b-steps",{attrs:{"has-navigation":!1},model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[n("b-step-item",{attrs:{label:"Audio"}},[n("div",{staticClass:"title"},[e._v("1. 음원 파일을 선택하세요")]),n("div",{staticClass:"file has-name flex-centered"},[n("label",{staticClass:"file-label"},[n("input",{staticClass:"file-input",attrs:{type:"file",name:"audio"},on:{change:e.onFileInput}}),n("span",{staticClass:"file-cta"},[n("b-icon",{staticClass:"file-icon",attrs:{icon:"file-upload"}}),n("div",{staticClass:"file-label"},[e._v("업로드")])],1),n("span",{staticClass:"file-name"},[e._v(e._s(e.fileName||"음원파일을 선택하세요"))])])])]),n("b-step-item",{attrs:{label:"Codec"}},[n("div",{staticClass:"title"},[e._v("2. 비교할 코덱 2개를 선택하세요")]),n("b-field",[n("b-select",{attrs:{placeholder:"비교소리 A",expanded:""},model:{value:e.pipelines[0],callback:function(t){e.$set(e.pipelines,0,t)},expression:"pipelines[0]"}},e._l(e.pipelineList,(function(t){return n("option",{key:t.name,domProps:{value:t}},[e._v(e._s(t.name))])})),0)],1),n("b-field",[n("b-select",{attrs:{placeholder:"비교소리 B",expanded:""},model:{value:e.pipelines[1],callback:function(t){e.$set(e.pipelines,1,t)},expression:"pipelines[1]"}},e._l(e.pipelineList,(function(t){return n("option",{key:t.name,domProps:{value:t}},[e._v(e._s(t.name))])})),0)],1),n("b-button",{attrs:{type:"is-primary",disabled:!e.isPipelineSelected},on:{click:e.prepareAudioTest}},[e._v("테스트 시작")])],1),n("b-step-item",{attrs:{label:"Blind testing"}},[e.isPipelineSelected?[n("div",{staticClass:"title"},[e._v("3. 둘 중 더 소리가 좋은걸 선택하세요.")]),n("table",{staticClass:"table is-bordered margin-center"},[n("tr",[n("th",[n("a",{attrs:{href:"#"},on:{click:function(t){return e.pickShuffledAudio(0)}}},[e._v("1번 선택")])]),n("th",[n("a",{attrs:{href:"#"},on:{click:function(t){return e.pickShuffledAudio(1)}}},[e._v("2번 선택")])])]),n("tr",[n("td",{staticClass:"has-text-centered"},[n("div",{on:{click:function(t){return e.playShuffledAudio(0)}}},[n("b-icon",{attrs:{icon:"play-circle-outline",size:"is-large"}})],1),n("b-tooltip",{attrs:{label:"다운로드",direction:"is-bottom"}},[n("b-button",{staticClass:"m-t-sm",on:{click:function(t){return e.downloadShuffledAudio(0)}}},[n("b-icon",{attrs:{icon:"download",size:"is-small"}}),n("span",[e._v("다운로드")])],1)],1)],1),n("td",{staticClass:"has-text-centered"},[n("div",{on:{click:function(t){return e.playShuffledAudio(1)}}},[n("b-icon",{attrs:{icon:"play-circle-outline",size:"is-large"}})],1),n("b-tooltip",{attrs:{label:"다운로드",direction:"is-bottom"}},[n("b-button",{staticClass:"m-t-sm",on:{click:function(t){return e.downloadShuffledAudio(1)}}},[n("b-icon",{attrs:{icon:"download",size:"is-small"}}),n("span",[e._v("다운로드")])],1)],1)],1)])]),n("div",{staticClass:"message"},[n("div",{staticClass:"message-header"},[e._v("결과 요약")]),n("div",{staticClass:"message-body has-text-left"},[n("p",[n("i",[e._v("파일: "+e._s(e.fileName))])]),n("p",[n("b",{staticClass:"m-r-xs"},[e._v("비교군 A: ")]),e._v(e._s(e.pipelines[0].name))]),n("p",[n("b",{staticClass:"m-r-xs"},[e._v("비교군 B: ")]),e._v(e._s(e.pipelines[1].name))]),n("table",{staticClass:"table is-bordered is-fullwidth m-t-md"},[n("th",{attrs:{colspan:e.testHistoryGridColumnsPerRow}},[e._v("테스트 결과")]),e._l(e.testHistoryGridRows,(function(t){return n("tr",e._l(t,(function(t){return n("td",{staticClass:"is-w10p has-text-centered",class:{"grid-bg-A":"A"===t,"grid-bg-B":"B"===t}},[e._v(e._s(t))])})),0)}))],2)])])]:e._e()],2)],1)],1)],1)},i=[],s=(n("99af"),n("cb29"),n("4de4"),n("4160"),n("d81d"),n("fb6a"),n("ace4"),n("0d03"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3"),n("841c"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a9"),n("72f7"),n("159b"),n("ddb0"),n("2b3d"),n("3835")),c=(n("96cf"),n("9110"));function o(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=c.createWorker({corePath:"ffmpeg-core.js",workerPath:"worker.min.js",logger:function(e){return console.log("message",e.message)}}),t.next=3,regeneratorRuntime.awrap(e.load());case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}))}n("498a");function u(e,t){return["ffmpeg -i input.wav ".concat(e.trim()," temp.").concat(t),"ffmpeg -i temp.".concat(t," output.wav")]}var l=[{name:"Original",commands:["cp input.wav output.wav"]},{name:"AAC 96k (ffmpeg aac)",commands:u("-c:a aac -b:a 96k","m4a")},{name:"AAC 128k (ffmpeg aac)",commands:u("-c:a aac -b:a 128k","m4a")},{name:"AAC 320k (ffmpeg aac)",commands:u("-c:a aac -b:a 320k","m4a")},{name:"MP3 128k (LAME encoder)",commands:u("-c:a libmp3lame -b:a 128k","mp3")},{name:"MP3 192k (LAME encoder)",commands:u("-c:a libmp3lame -b:a 192k","mp3")},{name:"MP3 320k (LAME encoder)",commands:u("-c:a libmp3lame -b:a 320k","mp3")},{name:"SBC 128k (Bad connection)",commands:u("-c:a sbc -b:a 128k","sbc")},{name:"SBC 229k (Joint stereo, 44.1kHz, Middle quality)",commands:u("-c:a sbc -b:a 229k","sbc")},{name:"SBC 328k (Joint stereo, 44.1khz, Moderate Quality)",commands:u("-c:a sbc -b:a 328k","sbc")},{name:"aptX 128k (Bad connection)",commands:u("-c:a aptx -b:a 128k","aptx")},{name:"aptX 352k (Lower latency mode, Middle quality) ",commands:u("-c:a aptx -b:a 352k","aptx")},{name:"aptX HD 576k",commands:u("-c:a aptx_hd -b:a 576k","aptx")}];n("a4d3"),n("e01a"),n("d28b"),n("1276"),n("2ca0");function d(e,t){var n,a,r,i,s,c,u,l,d,p,f,m;return regeneratorRuntime.async((function(h){while(1)switch(h.prev=h.next){case 0:return h.next=2,regeneratorRuntime.awrap(o());case 2:return n=h.sent,h.prev=3,h.next=6,regeneratorRuntime.awrap(n.writeText("input.wav",t));case 6:a=!0,r=!1,i=void 0,h.prev=9,s=e.commands[Symbol.iterator]();case 11:if(a=(c=s.next()).done){h.next=31;break}if(u=c.value,!u.startsWith("ffmpeg ")){h.next=18;break}return h.next=16,regeneratorRuntime.awrap(n.run(u.substr(7)));case 16:h.next=28;break;case 18:if(!u.startsWith("cp ")){h.next=28;break}if(l=u.trim().split(" "),3===l.length){h.next=22;break}throw new Error("Invalid cp");case 22:return h.next=24,regeneratorRuntime.awrap(n.read(l[1]));case 24:return d=h.sent,p=d.data,h.next=28,regeneratorRuntime.awrap(n.writeText(l[2],p));case 28:a=!0,h.next=11;break;case 31:h.next=37;break;case 33:h.prev=33,h.t0=h["catch"](9),r=!0,i=h.t0;case 37:h.prev=37,h.prev=38,a||null==s.return||s.return();case 40:if(h.prev=40,!r){h.next=43;break}throw i;case 43:return h.finish(40);case 44:return h.finish(37);case 45:return h.next=47,regeneratorRuntime.awrap(n.read("output.wav"));case 47:return f=h.sent,m=f.data,h.abrupt("return",m);case 50:return h.prev=50,n.worker.terminate(),h.finish(50);case 53:case"end":return h.stop()}}),null,null,[[3,,50,53],[9,33,37,45],[38,,40,44]])}var p=n("21a6"),f=0,m=1,h=2,v=a["a"].extend({beforeDestroy:function(){this.freeAudio()},data:function(){return{loadingText:"",activeStep:f,origWavData:null,fileName:"",pipelines:[null,null],convertedAudios:[],currentTestId:-1,currentShuffledAudio:[],shuffledTestAIndex:0,testHistory:[]}},computed:{pipelineList:function(){return l},isPipelineSelected:function(){return!(!this.pipelines[0]||!this.pipelines[1])},testHistoryGridColumnsPerRow:function(){return 10},testHistoryGridRows:function(){var e,t=[],n=this.testHistory,a=this.testHistoryGridColumnsPerRow;for(e=0;e<n.length;e+=a)t.push(n.slice(e,e+a));if(e!==n.length){var r=t[t.length-1],i=r.length;r.length=a,r.fill("",i,a)}return t},testACount:function(){return this.testHistory.filter((function(e){return"A"===e})).length},testBCount:function(){return this.testHistory.filter((function(e){return"B"===e})).length},testTotalCount:function(){return this.testACount+this.testBCount}},methods:{freeAudio:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.convertedAudios.forEach((function(e){e.pause(),e.remove()})),this.convertedAudios=[],this.currentShuffledAudio=[];case 3:case"end":return e.stop()}}),null,this)},onFileInput:function(e){var t=this,n=e.target.files,a=n?n[0]:null;if(a){var r=a.name;this.loadingText="WAV로 파일 불러들이는 중...";var i=new FileReader;i.readAsArrayBuffer(a),i.onload=function(){var e,n,a,s,c;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:return u.prev=0,e=i.result,n=r.slice(r.search("\\.")||r.length),u.next=5,regeneratorRuntime.awrap(o());case 5:return a=u.sent,u.next=8,regeneratorRuntime.awrap(a.run("-encoders"));case 8:return u.next=10,regeneratorRuntime.awrap(a.writeText("rawInput".concat(n),new Uint8Array(e)));case 10:return u.next=12,regeneratorRuntime.awrap(a.run("-i rawInput".concat(n," input.wav")));case 12:return u.next=14,regeneratorRuntime.awrap(a.read("input.wav"));case 14:s=u.sent,c=s.data,a.worker.terminate(),t.origWavData=c,t.fileName=r,t.activeStep=m,u.next=25;break;case 22:u.prev=22,u.t0=u["catch"](0),t.$buefy.dialog.alert({title:"음원 로딩에 실패했습니다.",message:u.t0.toString()});case 25:return u.prev=25,t.loadingText="",u.finish(25);case 28:case"end":return u.stop()}}),null,null,[[0,22,25,28]])}}},prepareAudioTest:function(){var e,t,n=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return this.loadingText="오디오 변환중...",a.prev=1,e=this.pipelines.map((function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",d(e,n.origWavData));case 1:case"end":return t.stop()}}))})),a.next=5,regeneratorRuntime.awrap(Promise.all(e));case 5:t=a.sent,this.convertedAudios=t.map((function(e){var t=new Audio,n=new Blob([e],{type:"audio/wav"}),a=window.URL.createObjectURL(n);return t.src=a,t})),this.testHistory=[],this.activeStep=h,this.initAudioTest();case 10:return a.prev=10,this.loadingText="",a.finish(10);case 13:case"end":return a.stop()}}),null,this,[[1,,10,13]])},initAudioTest:function(){var e=Object(s["a"])(this.convertedAudios,2),t=e[0],n=e[1];this.stopAllAudio(),Math.random()>=.5?(this.currentShuffledAudio=[t,n],this.shuffledTestAIndex=0):(this.currentShuffledAudio=[n,t],this.shuffledTestAIndex=1),this.currentTestId=1e6*Math.random()|0},stopAllAudio:function(){for(var e=0;e<2;e++)this.convertedAudios[e].pause(),this.convertedAudios[e].currentTime=0},playShuffledAudio:function(e){this.stopAllAudio(),this.currentShuffledAudio[e].play()},downloadShuffledAudio:function(e){var t,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=this.currentShuffledAudio[e].src,a.next=3,regeneratorRuntime.awrap(fetch(t).then((function(e){return e.blob()})));case 3:n=a.sent,Object(p["saveAs"])(n,"ABtest_".concat(this.currentTestId,"_").concat(e,".wav"));case 5:case"end":return a.stop()}}),null,this)},pickShuffledAudio:function(e){this.shuffledTestAIndex===e?this.testHistory.push("A"):this.testHistory.push("B"),this.initAudioTest()}}}),b=v,g=(n("034f"),n("2877")),w=Object(g["a"])(b,r,i,!1,null,null,null),x=w.exports,A=n("289d");n("5abe"),n("7984"),n("41e6");a["a"].use(A["a"]),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(x)}}).$mount("#app")}});
//# sourceMappingURL=app.8580c536.js.map